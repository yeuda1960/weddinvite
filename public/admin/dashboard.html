<!DOCTYPE html>
<html lang="he" dir="rtl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×œ×•×— × ×™×”×•×œ - Dashboard</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Heebo:wght@300;400;500;700&family=Assistant:wght@300;400;600;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../css/style.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <style>
        .selection-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: 1rem;
            background: #e3f2fd;
            border-radius: 8px;
            margin-top: 1rem;
        }

        .selection-actions .action-btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            color: white;
        }

        .selection-actions .send-btn {
            background: #4caf50;
        }

        .selection-actions .reset-btn {
            background: #ff9800;
        }

        .selection-actions .delete-btn {
            background: #f44336;
        }

        .selection-actions .clear-btn {
            background: #9e9e9e;
        }

        .row-actions {
            display: flex;
            gap: 0.5rem;
        }

        .row-actions button {
            padding: 0.3rem 0.5rem;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.9rem;
        }

        .row-actions .send-btn {
            background: #4caf50;
            color: white;
        }

        .row-actions .reset-btn {
            background: #ff9800;
            color: white;
        }

        .row-actions .delete-btn {
            background: #f44336;
            color: white;
        }

        .guest-checkbox {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .original-name {
            font-size: 0.8rem;
            color: #666;
        }
    </style>
</head>

<body>
    <div class="dashboard">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="container">
                <h1>×œ×•×— × ×™×”×•×œ ×—×ª×•× ×” ğŸ’’</h1>
                <p class="header-subtitle">× ×™×”×•×œ ×”×–×× ×•×ª ×•××™×©×•×¨×™ ×”×’×¢×”</p>
            </div>
        </header>

        <!-- WhatsApp Control Panel -->
        <section class="whatsapp-section">
            <div class="container">
                <div class="whatsapp-panel">
                    <div class="whatsapp-status">
                        <span id="whatsappStatusIndicator" class="status-indicator disconnected"></span>
                        <span id="whatsappStatusText">×œ× ××—×•×‘×¨</span>
                    </div>
                    <div class="whatsapp-controls">
                        <button id="connectWhatsappBtn" class="wa-btn connect">ğŸ“± ×”×ª×—×‘×¨ ×œ-WhatsApp</button>
                        <button id="sendAllBtn" class="wa-btn send" disabled>ğŸ“¤ ×©×œ×— ×œ×›×•×œ×</button>
                        <button id="pauseBtn" class="wa-btn pause" disabled>â¸ï¸ ×¢×¦×•×¨</button>
                        <button id="resumeBtn" class="wa-btn resume" disabled>â–¶ï¸ ×”××©×š</button>
                        <button id="stopBtn" class="wa-btn stop" disabled>â¹ï¸ ×‘×˜×œ</button>
                    </div>
                    <div class="whatsapp-progress" id="progressContainer" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                        </div>
                        <div class="progress-text">
                            <span id="progressText">0/0</span>
                            <span id="progressPercent">0%</span>
                        </div>
                        <div class="progress-details">
                            <span class="sent">âœ… × ×©×œ×—×•: <span id="sentCount">0</span></span>
                            <span class="failed">âŒ × ×›×©×œ×•: <span id="failedCount">0</span></span>
                            <span class="pending">â³ ×××ª×™× ×™×: <span id="pendingCount">0</span></span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Statistics Cards -->
        <section class="stats-section">
            <div class="container">
                <div class="stats-grid">
                    <div class="stat-card" data-filter="sent">
                        <div class="stat-icon">ğŸ“¤</div>
                        <div class="stat-content">
                            <div class="stat-label">×”×–×× ×•×ª × ×©×œ×—×•</div>
                            <div class="stat-value" id="statSent">-</div>
                        </div>
                    </div>
                    <div class="stat-card error" data-filter="failed">
                        <div class="stat-icon">âŒ</div>
                        <div class="stat-content">
                            <div class="stat-label">× ×›×©×œ×•</div>
                            <div class="stat-value" id="statFailed">-</div>
                        </div>
                    </div>
                    <div class="stat-card warning" data-filter="noResponse">
                        <div class="stat-icon">â³</div>
                        <div class="stat-content">
                            <div class="stat-label">×œ× ×¢× ×•</div>
                            <div class="stat-value" id="statNoResponse">-</div>
                        </div>
                    </div>
                    <div class="stat-card" data-filter="rsvp">
                        <div class="stat-icon">âœ…</div>
                        <div class="stat-content">
                            <div class="stat-label">××™×©×¨×• ×”×’×¢×”</div>
                            <div class="stat-value" id="statRsvp">-</div>
                        </div>
                    </div>
                    <div class="stat-card success" data-filter="attending">
                        <div class="stat-icon">ğŸ‰</div>
                        <div class="stat-content">
                            <div class="stat-label">××’×™×¢×™×</div>
                            <div class="stat-value" id="statAttending">-</div>
                        </div>
                    </div>
                    <div class="stat-card" data-filter="notAttending">
                        <div class="stat-icon">ğŸ˜”</div>
                        <div class="stat-content">
                            <div class="stat-label">×œ× ××’×™×¢×™×</div>
                            <div class="stat-value" id="statNotAttending">-</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ‘¥</div>
                        <div class="stat-content">
                            <div class="stat-label">×¡×”"×› ××•×¨×—×™×</div>
                            <div class="stat-value" id="statTotalGuests">-</div>
                        </div>
                    </div>
                    <div class="stat-card" data-filter="children">
                        <div class="stat-icon">ğŸ‘¶</div>
                        <div class="stat-content">
                            <div class="stat-label">×¢× ×™×œ×“×™×</div>
                            <div class="stat-value" id="statChildren">-</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Filters and Search -->
        <section class="controls-section">
            <div class="container">
                <div class="controls">
                    <input type="text" id="searchInput" placeholder="×—×™×¤×•×© ×œ×¤×™ ×©× ××• ×˜×œ×¤×•×Ÿ..." class="search-input">
                    <select id="filterSelect" class="filter-select">
                        <option value="all">×›×œ ×”××•×¨×—×™×</option>
                        <option value="pending">×××ª×™×Ÿ ×œ×©×œ×™×—×”</option>
                        <option value="sent">×”×–×× ×•×ª × ×©×œ×—×•</option>
                        <option value="failed">× ×›×©×œ×•</option>
                        <option value="noResponse">×œ× ×¢× ×• â³</option>
                        <option value="rsvp">××™×©×¨×• ×”×’×¢×”</option>
                        <option value="attending">××’×™×¢×™×</option>
                        <option value="notAttending">×œ× ××’×™×¢×™×</option>
                        <option value="children">×¢× ×™×œ×“×™×</option>
                    </select>
                    <button id="syncSheetsBtn" class="sync-btn">ğŸ”„ ×¡× ×›×¨×•×Ÿ ×Google Sheets</button>
                    <button id="copyPhonesBtn" class="copy-phones-btn">ğŸ“‹ ×”×¢×ª×§ ×˜×œ×¤×•× ×™×</button>
                    <button id="exportBtn" class="export-btn">ğŸ“¥ ×™×™×¦×•× ×œ××§×¡×œ</button>
                </div>
                <!-- Selection Actions Bar -->
                <div class="selection-actions" id="selectionActions" style="display: none;">
                    <span id="selectedCount">0 × ×‘×—×¨×•</span>
                    <button id="sendSelectedBtn" class="action-btn send-btn">ğŸ“¤ ×©×œ×— ×œ× ×‘×—×¨×™×</button>
                    <button id="resetSelectedBtn" class="action-btn reset-btn">ğŸ”„ ××¤×¡ × ×‘×—×¨×™×</button>
                    <button id="deleteSelectedBtn" class="action-btn delete-btn">ğŸ—‘ï¸ ××—×§ × ×‘×—×¨×™×</button>
                    <button id="clearSelectionBtn" class="action-btn clear-btn">âœ– ×‘×˜×œ ×‘×—×™×¨×”</button>
                </div>
            </div>
        </section>

        <!-- Guest List Table -->
        <section class="table-section">
            <div class="container">
                <div class="table-container">
                    <table class="guests-table">
                        <thead>
                            <tr>
                                <th><input type="checkbox" id="selectAllCheckbox" title="×‘×—×¨ ×”×›×œ"></th>
                                <th>×©× ××§×•×¨×™</th>
                                <th>×©× ××˜×•×¤×¡</th>
                                <th>×˜×œ×¤×•×Ÿ</th>
                                <th>×¡×˜×˜×•×¡ ×©×œ×™×—×”</th>
                                <th>××™×©×•×¨ ×”×’×¢×”</th>
                                <th>××’×™×¢?</th>
                                <th>××¡×¤×¨ ××•×¨×—×™×</th>
                                <th>×™×œ×“×™×</th>
                                <th>×”×¢×¨×•×ª</th>
                                <th>×¤×¢×•×œ×•×ª</th>
                            </tr>
                        </thead>
                        <tbody id="guestsTableBody">
                            <tr>
                                <td colspan="11" class="loading">×˜×•×¢×Ÿ × ×ª×•× ×™×...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
    </div>

    <!-- Toast notification -->
    <div id="toast" class="toast"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>

    <script src="js/dashboard.js"></script>
</body>

</html>